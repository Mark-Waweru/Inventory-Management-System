<!-- Product Image -->
<div class="flex flex-col w-full flex-wrap  p-3 shadow-xl rounded-2xl shadow-black/25">
    <% if product.product_image.attached? %>
        <%= image_tag product.product_image, class: "w-full h-[221px]" %>
    <% else %>
        <p>No image uploaded</p>
    <% end %>

    <div class="flex flex-col w-full">
        <div class='product-name-and-price flex flex-row items-center justify-between w-full  p-3'>
            <%# product name %>
            <p class="text-xl"><%= product.name %></p>
            <%# product price %>
            <p class="flex text-[#F87E11] font-semibold text-xl">KES <%= product.price %></p>
        </div>
        <%# Description %>
        <div class= 'p-3'>
            <%= product.description %>
        </div>
        <!-- Stock and Button logic will go here next -->
        <% if mode == "shop" %>
            <div class='stock and purchase button flex flex-row w-full justify-between items-center  p-3'>
                <p class="text-[#F87E11]"><%= product.quantity >= 1 ? "In Stock" : "Out of Stock" %></p>
                <button class="flex flex-row flex-end cursor-pointer rounded items-center justify-center gap-2 p-2 text-white w-1/3 bg-[#F87E11]">
                    Purchase
                    <%= image_tag "cart.svg" %>
                </button>
            </div>
        <% elsif mode == "inventory" %>
            <div class='stock and edit button flex flex-row items-center justify-between p-3'>
                <p class="text-[#F87E11]"><%= product.quantity %> In Stock</p>

                <!-- Product Threshold logic  -->
                <% if product.low_stock? %>
                    <div class="flex flex-row gap-2 items-center">
                        <p>Low on Stock</p>
                        <%= image_tag "low-stock-warning.svg", class: "" %>    
                    </div>
                <% end %>

                <%= link_to "Edit", edit_product_path(product), class: "flex flex-row w-1/4 flex-end cursor-pointer rounded items-center justify-center p-2 text-white bg-[#F87E11]" %>
            </div>
        <% end %>
    </div>
</div>
